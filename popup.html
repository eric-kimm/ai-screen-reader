<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body { width: 600px; height: 700px; padding: 16px; font-family: sans-serif; box-sizing: border-box; }
      
      button { padding: 8px 12px; cursor: pointer; border: 1px solid #ccc; border-radius: 4px; background: #f9f9f9; }
      button:hover { background: #eee; }
      button.primary { background: #1a73e8; color: white; border-color: #1a73e8; }
      button.primary:hover { background: #1558b0; }

      #action-btn { width: 100%; margin-bottom: 8px; }

      #status { 
        font-size: 11px; color: #555; margin: 6px 0; 
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      }

      #output {
        white-space: pre-wrap;
        word-break: break-all;
        font-size: 11px;
        font-family: monospace;
        background: #f4f4f4;
        border: 1px solid #ddd;
        padding: 8px;
        height: 300px;
        overflow-y: auto;
        margin-bottom: 12px;
      }

      .divider {
        border: none;
        border-top: 1px solid #ddd;
        margin: 12px 0;
      }

      #console-section h4 {
        margin: 0 0 6px 0;
        font-size: 13px;
        color: #333;
      }

      #console-section p {
        font-size: 11px;
        color: #777;
        margin: 0 0 8px 0;
      }

      #script-input {
        width: 100%;
        height: 100px;
        font-family: monospace;
        font-size: 11px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
        box-sizing: border-box;
        background: #1e1e1e;
        color: #d4d4d4;
      }

      #script-input::placeholder { color: #666; }

      .console-controls {
        display: flex;
        gap: 8px;
        margin-top: 8px;
      }

      #console-result {
        margin-top: 8px;
        font-size: 11px;
        font-family: monospace;
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 8px;
        border-radius: 4px;
        min-height: 36px;
        white-space: pre-wrap;
        word-break: break-all;
        display: none;
      }

      #console-result.success { border-left: 3px solid #4caf50; }
      #console-result.error { border-left: 3px solid #f44336; color: #ff6b6b; }
    </style>
  </head>
  <body>
    <h3 style="margin: 0 0 8px 0;">Page Inspector</h3>

    <div style="margin-bottom: 12px;">
      <button id="mic-permission-btn">Enable Microphone</button>
      <div id="mic-status" style="font-size: 11px; color: #555; margin-top: 6px;">
        Microphone permission has not been requested yet.
      </div>
    </div>

    <div id="target-tab-status" style="font-size: 11px; color: #555; margin-bottom: 12px;">
      Looking for an active browser tab...
    </div>

    <button id="action-btn" class="primary">Extract Page Context</button>
    <div id="status">Ready.</div>
    <div id="output"></div>

    <hr class="divider" />

    <div id="console-section">
      <h4>Console Script Tester</h4>
      <p>Paste a model-generated script here to test interaction with the current page.</p>
      <textarea 
        id="script-input" 
        placeholder="// Paste your script here e.g.&#10;document.querySelector('#search').value = 'hello';&#10;document.querySelector('#submit-btn').click();"
      ></textarea>
      <div class="console-controls">
        <button id="run-btn" class="primary">▶ Run Script</button>
        <button id="clear-btn">✕ Clear</button>
      </div>
      <div id="console-result"></div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
